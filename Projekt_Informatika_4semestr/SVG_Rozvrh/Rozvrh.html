<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap 5 Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

  <!-- Don't use this in production: -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

</head>

<body>

<div class="container-fluid p-5 bg-primary text-white text-center">
  <h1>Rozvrh</h1>
</div>
  
<div class="container mt-5">
  <div class="row">
      <div id="root">

      </div>
  </div>
</div>

</body>

<script type="text/babel">

    /*function Linie(props){
        return(
            <svg height="1000" width="1500">

                <line x1="0" y1="0" x2="0" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="0" y1="0" x2="1200" y2="0" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />

                <line x1="150" y1="0" x2="150" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="183" y1="0" x2="183" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />

                <line x1="333" y1="0" x2="333" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="367" y1="0" x2="367" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />

                <line x1="517" y1="0" x2="517" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="650" y1="0" x2="650" y2="1000" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />


                <line x1="0" y1="150" x2="1200" y2="150" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="0" y1="300" x2="1200" y2="300" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="0" y1="450" x2="1200" y2="450" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="0" y1="600" x2="1200" y2="600" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />
                <line x1="0" y1="750" x2="1200" y2="750" style={{"stroke": "rgb(0,0,0)", "stroke-width":2}} />


                
            
            </svg>
        )
    }*/


    function ToY(refDay, day){
        var rozdilCasu = day.getTime() - refDay.getTime()
        var rozdilDnu = Math.floor(rozdilCasu / (1000 * 3600 * 24))
        var vysledek = rozdilDnu * 150
        
        return vysledek
    }
    


    function ToX(refDay, cas){
        const casDayBegin = new Date(cas.getFullYear(), cas.getMonth(), cas.getDate(), 8)
        var vysledek = cas.getTime() - casDayBegin.getTime()

        return vysledek / 36000
    }

    function Udalost(props) {
        const start = props.start;
        const end = props.end;
        const d = new Date(2022, 4, 2, 8, 0, 0, 0);
        var x= ToX(d, start);
        var y= ToY(d, start);
        const x2 = ToX(d, end);
        const y2 = ToY(d, end);
        const width = x2 - x;
        
        //const barva = "rgb(211,211,211)";
        return (
            <>
            <rect x={x} y={y} width={width} height="150" fill={props.barva} />

            <text x={x+15} y={y+30} font-size="1em">{props.predmet}
                <tspan x={x+15} y={y+60}>{props.popis}</tspan>
                <tspan x={x+15} y={y+90}>{props.kdo}</tspan>
                <tspan x={x+15} y={y+120}>{props.kde}</tspan>
            </text>

            <line x1={x} y1="0" x2={x} y2="1000" style={{"stroke": "rgb(0,0,0)", "strokeWidth":1}} />
            <line x1={x2} y1="0" x2={x2} y2="1000" style={{"stroke": "rgb(0,0,0)", "strokeWidth":1}} />
            <line x1={x} y1={y} x2="1200" y2={y2} style={{"stroke": "rgb(0,0,0)", "strokeWidth":1}} />
            </>
        )
    }


    function Rozvrh(props) {
        const data = props.udalosti
        const vizualizace = data.map((udalost, index) => (<Udalost key={index} {...udalost} />))
        //<Linie />
        return (
            <svg width="1500" height="1000">
                {vizualizace}
                
            </svg>
        )
    }

    function Page(props) {
        const barvy = [
            
        ]

        const data = [
            {'start': new Date(2022, 4, 2, 8, 0, 0, 0), 'end': new Date(2022, 4, 2, 9, 30, 0, 0), predmet:'LAB/Informatika', popis:'Projekt', kdo:'Štefek Alexandr', kde:'Š8/20', barva: "rgb(230,175,85)"},
            {'start': new Date(2022, 4, 2, 9, 50, 0, 0), 'end': new Date(2022, 4, 2, 11, 20, 0, 0), predmet:'Tělesná výchova', popis:'Technika plavání', kdo:'Kellner Petr', kde: 'FITC/Bazén', barva: "rgb(40,185,255)"},
            {'start': new Date(2022, 4, 2, 11, 40, 0, 0), 'end': new Date(2022, 4, 2, 13, 10, 0, 0), predmet:'LAB/Matematika', popis:'Testování hypotéz', kdo: 'Šindlář Vojtěch', kde: 'Š5B/3',  barva: "rgb(230,175,85)"},

            {'start': new Date(2022, 4, 3, 8, 0, 0, 0), 'end': new Date(2022, 4, 3, 9, 30, 0, 0), predmet:'P/Krizové řízení', popis:'Ochrana státu', kdo:'Zeman Tomáš', kde:'Š6/14', barva: "rgb(50,230,100)"},
            {'start': new Date(2022, 4, 3, 9, 50, 0, 0), 'end': new Date(2022, 4, 3, 11, 20, 0, 0), predmet:'CV/Anglický jazyk', popis:'Politika', kdo:'Nedoma Radek', kde:'K251', barva: "rgb(40,185,255)"},
            {'start': new Date(2022, 4, 3, 11, 40, 0, 0), 'end': new Date(2022, 4, 3, 13, 10, 0, 0), predmet:'P/Matematika', popis:'Analýza rozptylu', kdo:'Majerová Šárka', kde:'Š8/44', barva: "rgb(50,230,100)"},
            {'start': new Date(2022, 4, 3, 14, 30, 0, 0), 'end': new Date(2022, 4, 3, 16, 0, 0, 0), predmet:'LAB/Informatika', popis:'Projekt', kdo:'Štefek Alexandr', kde:'Š8/20', barva: "rgb(230,175,85)"},

            {'start': new Date(2022, 4, 4, 8, 0, 0, 0), 'end': new Date(2022, 4, 4, 9, 30, 0, 0), predmet:'CV/Krizové řízení', popis:'Ochrana obyvatel', kdo:'Zeman Tomáš', kde:'Š6/14', barva: "rgb(50,230,100)"},
            {'start': new Date(2022, 4, 4, 9, 50, 0, 0), 'end': new Date(2022, 4, 4, 11, 20, 0, 0), predmet:'LAB/Informatika', popis:'Projekt', kdo:'Štefek Alexandr', kde:'Š8/20', barva: "rgb(230,175,85)"},
            {'start': new Date(2022, 4, 4, 11, 40, 0, 0), 'end': new Date(2022, 4, 4, 13, 10, 0, 0), predmet:'P/Matematika', popis:'Analýza rozptylu', kdo:'Majerová Šárka', kde:'Š8/44', barva: "rgb(50,230,100)"},

            
            {'start': new Date(2022, 4, 5, 8, 0, 0, 0), 'end': new Date(2022, 4, 5, 9, 30, 0, 0), predmet:'P/Krizové řízení', popis:'Ochrana státu', kdo:'Zeman Tomáš', kde:'Š6/14', barva: "rgb(50,230,100)"},
            {'start': new Date(2022, 4, 5, 9, 50, 0, 0), 'end': new Date(2022, 4, 5, 11, 20, 0, 0), predmet:'Tělesná výchova', popis:'Technika plavání', kdo:'Kellner Petr', kde: 'FITC/Bazén', barva: "rgb(40,185,255)"},
            {'start': new Date(2022, 4, 5, 11, 40, 0, 0), 'end': new Date(2022, 4, 5, 13, 10, 0, 0), predmet:'P/Teorie grafů', popis:'Rovinné grafy', kdo:'Potůček Radovan', kde:'Š8/44', barva: "rgb(50,230,100)"},
            {'start': new Date(2022, 4, 5, 14, 30, 0, 0), 'end': new Date(2022, 4, 5, 16, 0, 0, 0), predmet:'LAB/Informatika', popis:'Projekt', kdo:'Štefek Alexandr', kde:'Š8/20', barva: "rgb(230,175,85)"},

            {'start': new Date(2022, 4, 6, 8, 0, 0, 0), 'end': new Date(2022, 4, 6, 9, 30, 0, 0), predmet:'LAB/Informatika', popis:'Projekt', kdo:'Štefek Alexandr', kde:'Š8/20', barva: "rgb(230,175,85)"},
            {'start': new Date(2022, 4, 6, 9, 50, 0, 0), 'end': new Date(2022, 4, 6, 11, 20, 0, 0), predmet:'P/Teorie grafů', popis:'Rovinné grafy', kdo:'Potůček Radovan', kde:'Š8/44', barva: "rgb(40,185,255)"},
            

        ]
        return (
        <>    
            <Rozvrh udalosti={data}/>
        
        </>
        )
    }

    function App(props) {
        return (
            <Page id={1}/>
                )
    }
</script>

<script type="text/babel">
    ReactDOM.render(
      <App />,
      document.getElementById('root')
    );
</script>

</html>